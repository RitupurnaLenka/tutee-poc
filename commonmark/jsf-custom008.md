[Go to primary content](#BEGIN)

<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Java Platform, Enterprise Edition The Java EE Tutorial</strong><br />
<strong>Release 7 Java Platform, Enterprise Edition</strong><br />
E39031-02</td>
<td><table>
<tbody>
<tr class="odd">
<td> </td>
<td><a href="toc.htm"><img src="../../dcommon/gifs/toc.gif" alt="Go To Table Of Contents" /><br />
<span class="icon">Contents</span></a></td>
</tr>
</tbody>
</table></td>
</tr>
</tbody>
</table>

-----

<table>
<tbody>
<tr class="odd">
<td><a href="jsf-custom007.htm"><img src="../../dcommon/gifs/leftnav.gif" alt="Previous" /><br />
<span class="icon">Previous</span></a> </td>
<td><a href="jsf-custom009.htm"><img src="../../dcommon/gifs/rightnav.gif" alt="Next" /><br />
<span class="icon">Next</span></a></td>
<td> </td>
</tr>
</tbody>
</table>

Beta Draft: 2017-06-12

# 15.8 Handling Events for Custom Components

As explained in [Implementing an Event
Listener](jsf-custom007.htm#BNAUT), events are automatically queued on
standard components that fire events. A custom component, on the other
hand, must manually queue events from its `decode` method if it fires
events.

[Performing Decoding](jsf-custom005.htm#BNAVX) explains how to queue an
event on `MapComponent` using its `decode` method. This section explains
how to write the class that represents the event of clicking on the map
and how to write the method that processes this event.

As explained in [Understanding the Facelets
Page](jsf-custom003.htm#GLPCD), the `actionListener` attribute of the
`bookstore:map` tag points to the `MapBookChangeListener` class. The
listener class's `processAction` method processes the event of clicking
the image map. Here is the `processAction` method:

``` oac_no_warn
@Override
public void processAction(ActionEvent actionEvent)
        throws AbortProcessingException {

    AreaSelectedEvent event = (AreaSelectedEvent) actionEvent;
    String current = event.getMapComponent().getCurrent();
    FacesContext context = FacesContext.getCurrentInstance();
    String bookId = books.get(current);
    context.getExternalContext().getSessionMap().put("bookId", bookId);
}
```

When the JavaServer Faces implementation calls this method, it passes in
an `ActionEvent` object that represents the event generated by clicking
on the image map. Next, it casts it to an `AreaSelectedEvent` object
(see
tut-install`/examples/case-studies/dukes-bookstore/src/java/dukesbookstore/listeners/AreaSelectedEvent.java`).
Then this method gets the `MapComponent` associated with the event.
Next, it gets the value of the `MapComponent` object's `current`
attribute, which indicates the currently selected area. The method then
uses the value of the `current` attribute to get the book's ID value
from a `HashMap` object, which is constructed elsewhere in the
`MapBookChangeListener` class. Finally, the method places the ID
obtained from the `HashMap` object into the session map for the
application.

In addition to the method that processes the event, you need the event
class itself. This class is very simple to write; you have it extend
`ActionEvent` and provide a constructor that takes the component on
which the event is queued and a method that returns the component. Here
is the `AreaSelectedEvent` class used with the image map:

``` oac_no_warn
public class AreaSelectedEvent extends ActionEvent {
    public AreaSelectedEvent(MapComponent map) {
        super(map);
    }
    public MapComponent getMapComponent() {
        return ((MapComponent) getComponent());
    }
}
```

As explained in the section [Creating Custom Component
Classes](jsf-custom005.htm#BNAVU), in order for `MapComponent` to fire
events in the first place, it must implement `ActionSource`. Because
`MapComponent` extends `UICommand`, it also implements `ActionSource`.

-----

<table style="width:66%;">
<colgroup>
<col width="33%" />
<col width="0%" />
<col width="33%" />
</colgroup>
<tbody>
<tr class="odd">
<td><table style="width:96%;">
<colgroup>
<col width="0%" />
<col width="48%" />
<col width="48%" />
</colgroup>
<tbody>
<tr class="odd">
<td> </td>
<td><a href="jsf-custom007.htm"><img src="../../dcommon/gifs/leftnav.gif" alt="Previous" /><br />
<span class="icon">Previous</span></a> </td>
<td><a href="jsf-custom009.htm"><img src="../../dcommon/gifs/rightnav.gif" alt="Next" /><br />
<span class="icon">Next</span></a></td>
</tr>
</tbody>
</table></td>
<td><img src="../../dcommon/gifs/oracle.gif" alt="Oracle Logo" class="copyrightlogo" /> <a href="../../dcommon/html/cpyr.htm"><br />
<span class="copyrightlogo">Copyright © 2014, Oracle and/or its affiliates. All rights reserved.</span></a></td>
<td><table>
<tbody>
<tr class="odd">
<td> </td>
<td><a href="toc.htm"><img src="../../dcommon/gifs/toc.gif" alt="Go To Table Of Contents" /><br />
<span class="icon">Contents</span></a></td>
</tr>
</tbody>
</table></td>
</tr>
</tbody>
</table>

ORACLE CONFIDENTIAL. For authorized use only. Do not distribute to third parties.
